(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{437:function(t,s,a){"use strict";a.r(s);var r=a(17),v=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"tcp三次握手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tcp三次握手"}},[t._v("#")]),t._v(" TCP三次握手")]),t._v(" "),s("h2",{attrs:{id:"握手的目的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#握手的目的"}},[t._v("#")]),t._v(" 握手的目的")]),t._v(" "),s("ul",[s("li",[t._v("同步Sequence序列号\n"),s("ul",[s("li",[t._v("初始序列号ISN(Initial Sequence Number)")])])]),t._v(" "),s("li",[t._v("交换TCP通讯参数\n"),s("ul",[s("li",[t._v("如MSS、窗口比例因子、选择性确认、指定检验和算法")])])])]),t._v(" "),s("h2",{attrs:{id:"三次握手流程图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三次握手流程图"}},[t._v("#")]),t._v(" 三次握手流程图")]),t._v(" "),s("p",[s("img",{attrs:{src:"/imgs/network/tcp/3handshake.png",alt:"3handshake"}})]),t._v(" "),s("ul",[s("li",[t._v("SYN: 同步")]),t._v(" "),s("li",[t._v("ACK：确认")])]),t._v(" "),s("p",[t._v("SYN报文:"),s("br"),t._v("\n如下图所示在syn报文中序列号是初始序列号，FLAG标志位的SYN会被置1"),s("br"),t._v(" "),s("img",{attrs:{src:"/imgs/network/tcp/syn-mss.JPG",alt:"syn报文"}})]),t._v(" "),s("p",[t._v("SYN+ACK报文:"),s("br"),t._v("\n如下图所示在syn+ack的报文中序列号为server的初始序列号，确认号为收到的client的序列号加1，FLAG标志位的ACK和SYN都会被置为1\n"),s("img",{attrs:{src:"/imgs/network/tcp/syn+ack-mss.jpg",alt:"syn+ack报文"}})]),t._v(" "),s("p",[t._v("ACK报文:"),s("br"),t._v("\n如下图所示在ack报文中，确认号为收到的server的序列号加1，FLAG标志位的ACK会被置为1"),s("br"),t._v(" "),s("img",{attrs:{src:"/imgs/network/tcp/ack-mss.jpg",alt:"ack报文"}})]),t._v(" "),s("h3",{attrs:{id:"三次握手流程的状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三次握手流程的状态"}},[t._v("#")]),t._v(" 三次握手流程的状态")]),t._v(" "),s("ul",[s("li",[t._v("CLOSED")]),t._v(" "),s("li",[t._v("LISTEN")]),t._v(" "),s("li",[t._v("SYN-SENT")]),t._v(" "),s("li",[t._v("SYN-RECEIVED")]),t._v(" "),s("li",[t._v("ESTABLISHED")])]),t._v(" "),s("p",[t._v("如下图所示三次握手会有如下的状态变化："),s("br"),t._v(" "),s("img",{attrs:{src:"/imgs/network/tcp/3handshake-state.png",alt:"handshake state"}})]),t._v(" "),s("h2",{attrs:{id:"tcb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tcb"}},[t._v("#")]),t._v(" TCB")]),t._v(" "),s("p",[t._v("TCB：Transmission Control Block,保存连接使用的源端口、目的端口、目的IP、序号、应答序号、对方窗口大小、己方窗口大小、tcp状态、tcp输入/输出队列、应用层输出队列、tcp的重传有关变量等")])])}),[],!1,null,null,null);s.default=v.exports}}]);