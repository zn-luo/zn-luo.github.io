(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{365:function(e,r,o){"use strict";o.r(r);var n=o(17),t=Object(n.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"内置角色"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内置角色"}},[e._v("#")]),e._v(" 内置角色")]),e._v(" "),r("p",[e._v("MongoDB通过"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/core/authorization/#std-label-roles",target:"_blank",rel:"noopener noreferrer"}},[e._v("基于角色的授权"),r("OutboundLink")],1),e._v("授予对数据和命令的访问权，并提供内置的角色，这些角色提供数据库系统中通常需要的不同级别的访问权。MongoDB也提供了"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/core/security-user-defined-roles/#std-label-user-defined-roles",target:"_blank",rel:"noopener noreferrer"}},[e._v("用户自定义角色"),r("OutboundLink")],1),e._v("功能。")]),e._v(" "),r("h2",{attrs:{id:"思维导图"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#思维导图"}},[e._v("#")]),e._v(" 思维导图")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.processon.com/view/628744336376893bcc0ae087",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"/imgs/dbs/mongodb/mongodb-built-in-roles.png",alt:"mongodb内置角色权限"}}),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"普通用户角色"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#普通用户角色"}},[e._v("#")]),e._v(" 普通用户角色")]),e._v(" "),r("h3",{attrs:{id:"read"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#read"}},[e._v("#")]),e._v(" read")]),e._v(" "),r("p",[e._v("提供读取所有非系统表和system.js表上的数据的能力。")]),e._v(" "),r("p",[e._v("read角色通过以下操作提供读访问:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-changeStream",target:"_blank",rel:"noopener noreferrer"}},[e._v("changeStream"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)])]),e._v(" "),r("h3",{attrs:{id:"readwrite"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#readwrite"}},[e._v("#")]),e._v(" readWrite")]),e._v(" "),r("p",[e._v("readWrite角色包含了read角色所有的权限，同时增加了对所有非系统表和system.js表的修改权限。")]),e._v(" "),r("p",[e._v("readWrite角色提供了以下的操作：")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-changeStream",target:"_blank",rel:"noopener noreferrer"}},[e._v("changeStream"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-convertToCapped",target:"_blank",rel:"noopener noreferrer"}},[e._v("convertToCapped"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("createCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("createIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-insert",target:"_blank",rel:"noopener noreferrer"}},[e._v("insert"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-remove",target:"_blank",rel:"noopener noreferrer"}},[e._v("remove"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-renameCollectionSameDB",target:"_blank",rel:"noopener noreferrer"}},[e._v("renameCollectionSameDB"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-update",target:"_blank",rel:"noopener noreferrer"}},[e._v("update"),r("OutboundLink")],1)])]),e._v(" "),r("h2",{attrs:{id:"数据库管理员角色"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#数据库管理员角色"}},[e._v("#")]),e._v(" 数据库管理员角色")]),e._v(" "),r("p",[e._v("数据库管理员角色有dbAdmin, dbOwner, userAdmin三种。")]),e._v(" "),r("h3",{attrs:{id:"dbadmin"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dbadmin"}},[e._v("#")]),e._v(" dbAdmin")]),e._v(" "),r("p",[e._v("此角色提供执行管理任务的能力，例如与模式相关的任务、索引和收集统计信息。")]),e._v(" "),r("p",[e._v("该角色提供以下权限:")]),e._v(" "),r("ul",[r("li",[r("p",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data--database-.system.profile",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.profile"),r("OutboundLink")],1)]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-changeStream",target:"_blank",rel:"noopener noreferrer"}},[e._v("changeStream"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-convertToCapped",target:"_blank",rel:"noopener noreferrer"}},[e._v("convertToCapped"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("createCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheRead",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheRead"),r("OutboundLink")],1)])])]),e._v(" "),r("li",[r("p",[e._v("所有非系统的表")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-bypassDocumentValidation",target:"_blank",rel:"noopener noreferrer"}},[e._v("bypassDocumentValidation"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collMod",target:"_blank",rel:"noopener noreferrer"}},[e._v("collMod"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-compact",target:"_blank",rel:"noopener noreferrer"}},[e._v("compact"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-convertToCapped",target:"_blank",rel:"noopener noreferrer"}},[e._v("convertToCapped"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("createCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("createIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropDatabase",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropDatabase"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-enableProfiler",target:"_blank",rel:"noopener noreferrer"}},[e._v("enableProfiler"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheIndexFilter",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheIndexFilter"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheRead",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheRead"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheWrite",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheWrite"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-reIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("reIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-renameCollectionSameDB",target:"_blank",rel:"noopener noreferrer"}},[e._v("renameCollectionSameDB"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-storageDetails",target:"_blank",rel:"noopener noreferrer"}},[e._v("storageDetails"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-validate",target:"_blank",rel:"noopener noreferrer"}},[e._v("validate"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("dbAdmin角色并不包含所有的read权限，如find。")])])])]),e._v(" "),r("h3",{attrs:{id:"dbowner"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dbowner"}},[e._v("#")]),e._v(" dbOwner")]),e._v(" "),r("p",[e._v("数据库所有者可以对数据库执行任何管理操作。此角色包含了readWrite, dbAdmin 和 userAdmin角色的所有权限。")]),e._v(" "),r("h3",{attrs:{id:"useradmin"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#useradmin"}},[e._v("#")]),e._v(" userAdmin")]),e._v(" "),r("p",[e._v("提供了在当前数据库上创建和修改角色与用户的能力。由于userAdmin角色允许用户向任何用户(包括自己)授予任何权限，因此该角色还间接提供了超级用户对数据库的访问(如果作用域为admin数据库)，或者对集群的访问。")]),e._v(" "),r("p",[e._v("userAdmin角色提供以下操作:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-changeCustomData",target:"_blank",rel:"noopener noreferrer"}},[e._v("changeCustomData"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-changePassword",target:"_blank",rel:"noopener noreferrer"}},[e._v("changePassword"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createRole",target:"_blank",rel:"noopener noreferrer"}},[e._v("createRole"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createUser",target:"_blank",rel:"noopener noreferrer"}},[e._v("createUser"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropRole",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropRole"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropUser",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropUser"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-grantRole",target:"_blank",rel:"noopener noreferrer"}},[e._v("grantRole"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-revokeRole",target:"_blank",rel:"noopener noreferrer"}},[e._v("revokeRole"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-setAuthenticationRestriction",target:"_blank",rel:"noopener noreferrer"}},[e._v("setAuthenticationRestriction"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-viewRole",target:"_blank",rel:"noopener noreferrer"}},[e._v("viewRole"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-viewUser",target:"_blank",rel:"noopener noreferrer"}},[e._v("viewUser"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("注意: 具有此角色的用户可以为自己分配对该数据库的任何权限。在admin数据库上授予userAdmin角色具有进一步的安全影响，因为这间接提供了对集群的超级用户访问。在admin范围内，具有userAdmin角色的用户可以授予集群范围的角色或权限，包括userAdminAnyDatabase。")]),e._v(" "),r("h2",{attrs:{id:"集群管理员角色"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#集群管理员角色"}},[e._v("#")]),e._v(" 集群管理员角色")]),e._v(" "),r("p",[e._v("admin数据库包括以下角色，用于管理整个系统，而不仅仅是单个数据库。这些角色包括但不限于复制集和分片集群管理功能。")]),e._v(" "),r("h3",{attrs:{id:"clusteradmin"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#clusteradmin"}},[e._v("#")]),e._v(" clusterAdmin")]),e._v(" "),r("p",[e._v("提供了最大的集群管理访问权限。该角色结合了clusterManager、clusterMonitor和hostManager角色所具有的权限。此外，该角色还提供dropDatabase操作权限。")]),e._v(" "),r("h3",{attrs:{id:"clustermanager"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#clustermanager"}},[e._v("#")]),e._v(" clusterManager")]),e._v(" "),r("p",[e._v("提供了对集群的管理和监控操作权限。具有此角色的用户可以访问config数据库和local数据库。")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/resource-document/#std-label-resource-cluster",target:"_blank",rel:"noopener noreferrer"}},[e._v("cluster"),r("OutboundLink")],1),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-addShard",target:"_blank",rel:"noopener noreferrer"}},[e._v("addShard"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-appendOplogNote",target:"_blank",rel:"noopener noreferrer"}},[e._v("appendOplogNote"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-applicationMessage",target:"_blank",rel:"noopener noreferrer"}},[e._v("applicationMessage"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-cleanupOrphaned",target:"_blank",rel:"noopener noreferrer"}},[e._v("cleanupOrphaned"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-flushRouterConfig",target:"_blank",rel:"noopener noreferrer"}},[e._v("flushRouterConfig"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getDefaultRWConcern",target:"_blank",rel:"noopener noreferrer"}},[e._v("getDefaultRWConcern(New in version 4.4)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listSessions",target:"_blank",rel:"noopener noreferrer"}},[e._v("listSessions(New in version 3.6)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listShards",target:"_blank",rel:"noopener noreferrer"}},[e._v("listShards"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-removeShard",target:"_blank",rel:"noopener noreferrer"}},[e._v("removeShard"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-replSetConfigure",target:"_blank",rel:"noopener noreferrer"}},[e._v("replSetConfigure"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-replSetGetConfig",target:"_blank",rel:"noopener noreferrer"}},[e._v("replSetGetConfig"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-replSetGetStatus",target:"_blank",rel:"noopener noreferrer"}},[e._v("replSetGetStatus"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-replSetStateChange",target:"_blank",rel:"noopener noreferrer"}},[e._v("replSetStateChange"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-resync",target:"_blank",rel:"noopener noreferrer"}},[e._v("resync"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-setDefaultRWConcern",target:"_blank",rel:"noopener noreferrer"}},[e._v("setDefaultRWConcern(New in version 4.4)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-setFeatureCompatibilityVersion",target:"_blank",rel:"noopener noreferrer"}},[e._v("setFeatureCompatibilityVersion"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-setFreeMonitoring",target:"_blank",rel:"noopener noreferrer"}},[e._v("setFreeMonitoring"),r("OutboundLink")],1)])])]),e._v(" "),r("li",[e._v("所有数据库\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-clearJumboFlag",target:"_blank",rel:"noopener noreferrer"}},[e._v("clearJumboFlag(New in 4.2.3 and 4.0.15)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-enableSharding",target:"_blank",rel:"noopener noreferrer"}},[e._v("enableSharding"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-refineCollectionShardKey",target:"_blank",rel:"noopener noreferrer"}},[e._v("refineCollectionShardKey(New in 4.4)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-moveChunk",target:"_blank",rel:"noopener noreferrer"}},[e._v("moveChunk"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-splitVector",target:"_blank",rel:"noopener noreferrer"}},[e._v("splitVector"),r("OutboundLink")],1)])])])]),e._v(" "),r("p",[e._v("clusterManager为config和local数据库提供了额外的权限。")]),e._v(" "),r("p",[e._v("在config数据库中，提供了以下操作权限:")]),e._v(" "),r("ul",[r("li",[e._v("config数据库上所有非系统的表\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-enableSharding",target:"_blank",rel:"noopener noreferrer"}},[e._v("enableSharding"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-insert",target:"_blank",rel:"noopener noreferrer"}},[e._v("insert"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-moveChunk",target:"_blank",rel:"noopener noreferrer"}},[e._v("moveChunk"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheRead",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheRead"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-remove",target:"_blank",rel:"noopener noreferrer"}},[e._v("remove"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-splitVector",target:"_blank",rel:"noopener noreferrer"}},[e._v("splitVector"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-update",target:"_blank",rel:"noopener noreferrer"}},[e._v("update"),r("OutboundLink")],1)])])]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data--database-.system.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.js"),r("OutboundLink")],1),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheRead",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheRead"),r("OutboundLink")],1)])])])]),e._v(" "),r("p",[e._v("在local数据库中，提供了以下操作权限:")]),e._v(" "),r("ul",[r("li",[e._v("local数据库上所有非系统的表\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-enableSharding",target:"_blank",rel:"noopener noreferrer"}},[e._v("enableSharding"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-insert",target:"_blank",rel:"noopener noreferrer"}},[e._v("insert"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-moveChunk",target:"_blank",rel:"noopener noreferrer"}},[e._v("moveChunk"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-remove",target:"_blank",rel:"noopener noreferrer"}},[e._v("remove"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-splitVector",target:"_blank",rel:"noopener noreferrer"}},[e._v("splitVector"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-update",target:"_blank",rel:"noopener noreferrer"}},[e._v("update"),r("OutboundLink")],1)])])]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/local-database/#mongodb-data-local.system.replset",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.replset"),r("OutboundLink")],1),e._v("表\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheRead",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheRead"),r("OutboundLink")],1)])])])]),e._v(" "),r("h3",{attrs:{id:"clustermonitor"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#clustermonitor"}},[e._v("#")]),e._v(" clusterMonitor")]),e._v(" "),r("p",[e._v("为监控工具提供只读访问权限。")]),e._v(" "),r("p",[e._v("允许在整个集群上执行以下操作:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-checkFreeMonitoringStatus",target:"_blank",rel:"noopener noreferrer"}},[e._v("checkFreeMonitoringStatus(New in version 4.0)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-connPoolStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("connPoolStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getCmdLineOpts",target:"_blank",rel:"noopener noreferrer"}},[e._v("getCmdLineOpts"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getDefaultRWConcern",target:"_blank",rel:"noopener noreferrer"}},[e._v("getDefaultRWConcern(New in version 4.4)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getLog",target:"_blank",rel:"noopener noreferrer"}},[e._v("getLog"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getParameter",target:"_blank",rel:"noopener noreferrer"}},[e._v("getParameter"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getShardMap",target:"_blank",rel:"noopener noreferrer"}},[e._v("getShardMap"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-hostInfo",target:"_blank",rel:"noopener noreferrer"}},[e._v("hostInfo"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-inprog",target:"_blank",rel:"noopener noreferrer"}},[e._v("inprog"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listDatabases",target:"_blank",rel:"noopener noreferrer"}},[e._v("listDatabases"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listSessions",target:"_blank",rel:"noopener noreferrer"}},[e._v("listSessions(New in version 3.6)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listShards",target:"_blank",rel:"noopener noreferrer"}},[e._v("listShards"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-netstat",target:"_blank",rel:"noopener noreferrer"}},[e._v("netstat"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-replSetGetConfig",target:"_blank",rel:"noopener noreferrer"}},[e._v("replSetGetConfig"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-replSetGetStatus",target:"_blank",rel:"noopener noreferrer"}},[e._v("replSetGetStatus"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-serverStatus",target:"_blank",rel:"noopener noreferrer"}},[e._v("serverStatus"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-setFreeMonitoring",target:"_blank",rel:"noopener noreferrer"}},[e._v("setFreeMonitoring(New in version 4.0)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-shardingState",target:"_blank",rel:"noopener noreferrer"}},[e._v("shardingState"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-top",target:"_blank",rel:"noopener noreferrer"}},[e._v("top"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("允许对集群中的所有数据库执行以下操作:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getShardVersion",target:"_blank",rel:"noopener noreferrer"}},[e._v("getShardVersion"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-indexStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("indexStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-useUUID",target:"_blank",rel:"noopener noreferrer"}},[e._v("useUUID(New in version 3.6)"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("允许对集群的所有system.profile表执行find操作。")]),e._v(" "),r("p",[e._v("在config数据库中，允许执行以下操作:")]),e._v(" "),r("ul",[r("li",[e._v("config数据库上所有非系统的表\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getShardVersion",target:"_blank",rel:"noopener noreferrer"}},[e._v("getShardVersion"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-indexStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("indexStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheRead",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheRead"),r("OutboundLink")],1)])])]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data--database-.system.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.js"),r("OutboundLink")],1),e._v("表\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheRead",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheRead"),r("OutboundLink")],1)])])])]),e._v(" "),r("p",[e._v("在local数据库中，提供了以下操作权限:")]),e._v(" "),r("ul",[r("li",[e._v("local数据库上的所有表\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getShardVersion",target:"_blank",rel:"noopener noreferrer"}},[e._v("getShardVersion"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-indexStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("indexStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheRead",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheRead"),r("OutboundLink")],1)])])]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data--database-.system.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.js"),r("OutboundLink")],1),e._v("表\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheRead",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheRead"),r("OutboundLink")],1)])])]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/local-database/#mongodb-data-local.system.replset",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.replset"),r("OutboundLink")],1),e._v(", "),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data--database-.system.profile",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.profile"),r("OutboundLink")],1),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)])])])]),e._v(" "),r("h3",{attrs:{id:"hostmanager"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#hostmanager"}},[e._v("#")]),e._v(" hostManager")]),e._v(" "),r("p",[e._v("提供了监控和管理服务器的能力。")]),e._v(" "),r("p",[e._v("在整个集群上，提供以下操作权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-applicationMessage",target:"_blank",rel:"noopener noreferrer"}},[e._v("applicationMessage"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-closeAllDatabases",target:"_blank",rel:"noopener noreferrer"}},[e._v("closeAllDatabases"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-connPoolSync",target:"_blank",rel:"noopener noreferrer"}},[e._v("connPoolSync"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-flushRouterConfig",target:"_blank",rel:"noopener noreferrer"}},[e._v("flushRouterConfig"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-fsync",target:"_blank",rel:"noopener noreferrer"}},[e._v("fsync"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-invalidateUserCache",target:"_blank",rel:"noopener noreferrer"}},[e._v("invalidateUserCache"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killAnyCursor",target:"_blank",rel:"noopener noreferrer"}},[e._v("killAnyCursor(New in version 4.0)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killAnySession",target:"_blank",rel:"noopener noreferrer"}},[e._v("killAnySession(New in version 3.6)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killop",target:"_blank",rel:"noopener noreferrer"}},[e._v("killop"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-logRotate",target:"_blank",rel:"noopener noreferrer"}},[e._v("logRotate"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-oidReset",target:"_blank",rel:"noopener noreferrer"}},[e._v("oidReset"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-resync",target:"_blank",rel:"noopener noreferrer"}},[e._v("resync"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-rotateCertificates",target:"_blank",rel:"noopener noreferrer"}},[e._v("rotateCertificates(New in version 5.0)"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-setParameter",target:"_blank",rel:"noopener noreferrer"}},[e._v("setParameter"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-shutdown",target:"_blank",rel:"noopener noreferrer"}},[e._v("shutdown"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-touch",target:"_blank",rel:"noopener noreferrer"}},[e._v("touch"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-unlock",target:"_blank",rel:"noopener noreferrer"}},[e._v("unlock"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("从4.4版开始，hostManager不再为集群提供"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-cpuProfiler",target:"_blank",rel:"noopener noreferrer"}},[e._v("cpuProfiler"),r("OutboundLink")],1),e._v("权限操作。")]),e._v(" "),r("p",[e._v("在集群的所有数据库上，提供"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1),e._v("操作权限。")]),e._v(" "),r("h2",{attrs:{id:"backup与restore角色"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#backup与restore角色"}},[e._v("#")]),e._v(" backup与restore角色")]),e._v(" "),r("p",[e._v("admin数据库提供backup和restore角色用于备份和恢复数据。")]),e._v(" "),r("h3",{attrs:{id:"backup"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#backup"}},[e._v("#")]),e._v(" backup")]),e._v(" "),r("p",[e._v("提供了备份数据所需的最小权限。该角色提供足够的权限使用MongoDB Cloud Manager备份代理、Ops Manager备份代理，或者使用 mongodump备份整个mongod实例。")]),e._v(" "),r("p",[e._v("为admin数据库的mms.backup表和config数据库的settings表提供"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-insert",target:"_blank",rel:"noopener noreferrer"}},[e._v("insert"),r("OutboundLink")],1),e._v("和"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-update",target:"_blank",rel:"noopener noreferrer"}},[e._v("update"),r("OutboundLink")],1),e._v("操作权限。")]),e._v(" "),r("p",[e._v("在"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/resource-document/#std-label-anyResource",target:"_blank",rel:"noopener noreferrer"}},[e._v("anyResource"),r("OutboundLink")],1),e._v(",提供以下操作权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listDatabases",target:"_blank",rel:"noopener noreferrer"}},[e._v("listDatabases"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listIndexes",target:"_blank",rel:"noopener noreferrer"}},[e._v("listIndexes"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("在整个"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/resource-document/#std-label-resource-cluster",target:"_blank",rel:"noopener noreferrer"}},[e._v("集群"),r("OutboundLink")],1),e._v("，提供以下操作权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-appendOplogNote",target:"_blank",rel:"noopener noreferrer"}},[e._v("appendOplogNote"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getParameter",target:"_blank",rel:"noopener noreferrer"}},[e._v("getParameter"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listDatabases",target:"_blank",rel:"noopener noreferrer"}},[e._v("listDatabases"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-serverStatus",target:"_blank",rel:"noopener noreferrer"}},[e._v("serverStatus(Starting in MongoDB 4.2)"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("在下面表中提供find操作权限:")]),e._v(" "),r("ul",[r("li",[e._v("集群的所有非系统表，包括config和local数据库")]),e._v(" "),r("li",[e._v("集群上的"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data--database-.system.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.js"),r("OutboundLink")],1),e._v("表和"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data--database-.system.profile",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.profile"),r("OutboundLink")],1),e._v("表")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data-admin.system.users",target:"_blank",rel:"noopener noreferrer"}},[e._v("admin.system.users"),r("OutboundLink")],1),e._v("表和"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data-admin.system.roles",target:"_blank",rel:"noopener noreferrer"}},[e._v("admin.system.roles"),r("OutboundLink")],1),e._v("表")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/config-database/#mongodb-data-config.settings",target:"_blank",rel:"noopener noreferrer"}},[e._v("config.settings"),r("OutboundLink")],1),e._v("表")]),e._v(" "),r("li",[e._v("MongoDB 2.6之前版本的system.users表")])]),e._v(" "),r("p",[e._v("为"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/config-database/#mongodb-data-config.settings",target:"_blank",rel:"noopener noreferrer"}},[e._v("config.settings"),r("OutboundLink")],1),e._v("表提供insert和update操作。")]),e._v(" "),r("p",[e._v("从3.2.1版本开始，backup角色提供了备份"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data--database-.system.profile",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.profile"),r("OutboundLink")],1),e._v("表的权限。在之前的版本中，备份system.profile需要额外的读权限。")]),e._v(" "),r("h3",{attrs:{id:"restore"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#restore"}},[e._v("#")]),e._v(" restore")]),e._v(" "),r("p",[e._v("从3.6版本开始，在非系统表中提供"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-convertToCapped",target:"_blank",rel:"noopener noreferrer"}},[e._v("convertToCapped"),r("OutboundLink")],1),e._v("权限。")]),e._v(" "),r("p",[e._v("在备份数据不包含"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data--database-.system.profile",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.profile"),r("OutboundLink")],1),e._v("表的数据，同时执行"),r("a",{attrs:{href:"https://www.mongodb.com/docs/database-tools/mongorestore/#mongodb-binary-bin.mongorestore",target:"_blank",rel:"noopener noreferrer"}},[e._v("mongorestore"),r("OutboundLink")],1),e._v("命令不带"),r("a",{attrs:{href:"https://www.mongodb.com/docs/database-tools/mongorestore/#std-option-mongorestore.--oplogReplay",target:"_blank",rel:"noopener noreferrer"}},[e._v("--oplogReplay"),r("OutboundLink")],1),e._v("参数时，restore角色提供了恢复数据时所需的权限。")]),e._v(" "),r("p",[e._v("如果备份数据包含system.profile表的数据或者执行恢复时带有--oplogReplay，则需要下面的额外参数:")]),e._v(" "),r("ul",[r("li",[e._v("system.profile"),r("br"),e._v("\n如果备份数据中包含system.profile表的数据且目标数据库不包含system.profile表。即使程序实际上没有还原system.profile数据，mongorestore也会尝试创建此表。因此，用户需要额外的权限在数据库的system.profile表上执行createCollection和convertToCapped操作。"),r("br"),e._v("\n内置角色dbAdmin和dbAdminAnyDatabase都提供了额外的权限。")]),e._v(" "),r("li",[e._v("--oplogReplay"),r("br"),e._v("\n要使用--oplogReplay参数，需要创建一个自定义的角色，该角色在anyResource上具有anyAction权限。此角色最好只授予必须使用--oplogReplay运行mongorestore命令的用户。")])]),e._v(" "),r("p",[e._v("在整个集群上提供"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-getParameter",target:"_blank",rel:"noopener noreferrer"}},[e._v("getParameter"),r("OutboundLink")],1),e._v("操作权限。")]),e._v(" "),r("p",[e._v("对所有非系统表提供以下操作权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-bypassDocumentValidation",target:"_blank",rel:"noopener noreferrer"}},[e._v("bypassDocumentValidation"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-changeCustomData",target:"_blank",rel:"noopener noreferrer"}},[e._v("changeCustomData"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-changePassword",target:"_blank",rel:"noopener noreferrer"}},[e._v("changePassword"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collMod",target:"_blank",rel:"noopener noreferrer"}},[e._v("collMod"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-convertToCapped",target:"_blank",rel:"noopener noreferrer"}},[e._v("convertToCapped"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("createCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("createIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createRole",target:"_blank",rel:"noopener noreferrer"}},[e._v("createRole"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createUser",target:"_blank",rel:"noopener noreferrer"}},[e._v("createUser"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropRole",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropRole"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropUser",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropUser"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-grantRole",target:"_blank",rel:"noopener noreferrer"}},[e._v("grantRole"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-insert",target:"_blank",rel:"noopener noreferrer"}},[e._v("insert"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-revokeRole",target:"_blank",rel:"noopener noreferrer"}},[e._v("revokeRole"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-viewRole",target:"_blank",rel:"noopener noreferrer"}},[e._v("viewRole"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-viewUser",target:"_blank",rel:"noopener noreferrer"}},[e._v("viewUser"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("在"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data--database-.system.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("system.js"),r("OutboundLink")],1),e._v("表上提供以下操作权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-bypassDocumentValidation",target:"_blank",rel:"noopener noreferrer"}},[e._v("bypassDocumentValidation"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collMod",target:"_blank",rel:"noopener noreferrer"}},[e._v("collMod"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("createCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("createIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-insert",target:"_blank",rel:"noopener noreferrer"}},[e._v("insert"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("对"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/resource-document/#std-label-anyResource",target:"_blank",rel:"noopener noreferrer"}},[e._v("anyResource"),r("OutboundLink")],1),e._v("提供了"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listCollections",target:"_blank",rel:"noopener noreferrer"}},[e._v("listCollections"),r("OutboundLink")],1),e._v("操作权限。")]),e._v(" "),r("p",[e._v("对config和local数据库的所有非系统表提供了以下操作权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-bypassDocumentValidation",target:"_blank",rel:"noopener noreferrer"}},[e._v("bypassDocumentValidation"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collMod",target:"_blank",rel:"noopener noreferrer"}},[e._v("collMod"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("createCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("createIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-insert",target:"_blank",rel:"noopener noreferrer"}},[e._v("insert"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("在"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data-admin.system.version",target:"_blank",rel:"noopener noreferrer"}},[e._v("admin.system.version"),r("OutboundLink")],1),e._v("提供了以下操作权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-bypassDocumentValidation",target:"_blank",rel:"noopener noreferrer"}},[e._v("bypassDocumentValidation"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collMod",target:"_blank",rel:"noopener noreferrer"}},[e._v("collMod"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("createCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("createIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-insert",target:"_blank",rel:"noopener noreferrer"}},[e._v("insert"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("在"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/system-collections/#mongodb-data-admin.system.roles",target:"_blank",rel:"noopener noreferrer"}},[e._v("admin.system.roles"),r("OutboundLink")],1),e._v("提供了"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("createIndex"),r("OutboundLink")],1),e._v("操作权限。")]),e._v(" "),r("p",[e._v("对admin.system.users和遗留的system.users表提供以下操作权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-bypassDocumentValidation",target:"_blank",rel:"noopener noreferrer"}},[e._v("bypassDocumentValidation"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collMod",target:"_blank",rel:"noopener noreferrer"}},[e._v("collMod"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("createCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("createIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropCollection",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropCollection"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-insert",target:"_blank",rel:"noopener noreferrer"}},[e._v("insert"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-remove",target:"_blank",rel:"noopener noreferrer"}},[e._v("remove"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-update",target:"_blank",rel:"noopener noreferrer"}},[e._v("update"),r("OutboundLink")],1)])]),e._v(" "),r("h2",{attrs:{id:"all-database角色"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#all-database角色"}},[e._v("#")]),e._v(" All-Database角色")]),e._v(" "),r("p",[e._v("以下角色在admin数据库上可用，并提供适用于除local和config之外的所有数据库的权限。")]),e._v(" "),r("h3",{attrs:{id:"readanydatabase"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#readanydatabase"}},[e._v("#")]),e._v(" readAnyDatabase")]),e._v(" "),r("p",[e._v("在所有的数据库(local和config数据库除外)上提供了与read角色相同的只读权限。该角色还在整个集群上提供了"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listDatabases",target:"_blank",rel:"noopener noreferrer"}},[e._v("listDatabases"),r("OutboundLink")],1),e._v("操作权限。")]),e._v(" "),r("p",[e._v("在3.4版本之前，readAnyDatabase权限包含local和config数据库。要为local数据库提供读权限，需在admin数据库为local数据库创建一个具有read角色的用户。")]),e._v(" "),r("p",[e._v("要访问config和local数据库，参考"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/built-in-roles/#mongodb-authrole-clusterManager",target:"_blank",rel:"noopener noreferrer"}},[e._v("clusterManager"),r("OutboundLink")],1),e._v("和"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/built-in-roles/#mongodb-authrole-clusterMonitor",target:"_blank",rel:"noopener noreferrer"}},[e._v("clusterMonitor"),r("OutboundLink")],1),e._v("角色。")]),e._v(" "),r("h3",{attrs:{id:"readwriteanydatabase"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#readwriteanydatabase"}},[e._v("#")]),e._v(" readWriteAnyDatabase")]),e._v(" "),r("p",[e._v("在所有的数据库(local和config数据库除外)上提供了与readWrite角色相同的读写权限。该角色还在整个集群上提供"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listDatabases",target:"_blank",rel:"noopener noreferrer"}},[e._v("listDatabases"),r("OutboundLink")],1),e._v("操作权限。")]),e._v(" "),r("p",[e._v("在3.4版本之前，readWriteAnyDatabase权限包含local和config数据库。要为local数据库提供读写权限，需在admin数据库为local数据库创建一个具有readWriteAnyDatabase角色的用户。")]),e._v(" "),r("h3",{attrs:{id:"useradminanydatabase"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#useradminanydatabase"}},[e._v("#")]),e._v(" userAdminAnyDatabase")]),e._v(" "),r("p",[e._v("在所有的数据库(local和config数据库除外)上提供了与userAdmin角色相同的管理操作权限。")]),e._v(" "),r("p",[e._v("userAdminAnyDatabase还在集群上提供了以下操作权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-authSchemaUpgrade",target:"_blank",rel:"noopener noreferrer"}},[e._v("authSchemaUpgrade"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-invalidateUserCache",target:"_blank",rel:"noopener noreferrer"}},[e._v("invalidateUserCache"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listDatabases",target:"_blank",rel:"noopener noreferrer"}},[e._v("listDatabases"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("该角色还在admin数据库的system.users和system.roles表以及2.6之前版本的遗留system.users表上提供以下操作权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-collStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("collStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbHash",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbHash"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dbStats",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbStats"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-find",target:"_blank",rel:"noopener noreferrer"}},[e._v("find"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-killCursors",target:"_blank",rel:"noopener noreferrer"}},[e._v("killCursors"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-planCacheRead",target:"_blank",rel:"noopener noreferrer"}},[e._v("planCacheRead"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("2.6.4版本的修改: userAdminAnyDatabase角色在admin.system.users和admin.system.roles表上添加了下面的权限:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-createIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("createIndex"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-dropIndex",target:"_blank",rel:"noopener noreferrer"}},[e._v("dropIndex"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("userAdminAnyDatabase角色不限制用户可以授予的权限。因此，userAdminAnyDatabase用户可以授予自己超过当前权限的权限，甚至可以授予自己所有权限，即使角色没有显式地授予用户管理权限以外的权限。这个角色实际上是MongoDB系统的超级用户。")]),e._v(" "),r("p",[e._v("3.4的修改: userAdminAnyDatabase不再适用于local和config数据库。")]),e._v(" "),r("h3",{attrs:{id:"dbadminanydatabase"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dbadminanydatabase"}},[e._v("#")]),e._v(" dbAdminAnyDatabase")]),e._v(" "),r("p",[e._v("在所有的数据库(local和config数据库除外)上提供了与dbAdmin角色相同的操作权限。该角色还在整个集群上提供"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-listDatabases",target:"_blank",rel:"noopener noreferrer"}},[e._v("listDatabases"),r("OutboundLink")],1),e._v("操作权限。")]),e._v(" "),r("p",[e._v("在3.4版本之前，dbAdminAnyDatabase权限包含local和config数据库。要为local数据库提供dbAdmin权限，需在admin数据库为local数据库创建一个具有dbAdmin 角色的用户。")]),e._v(" "),r("p",[e._v("从5.0版本开始,dbAdminAnyDatabase包含"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#std-label-internal-actions",target:"_blank",rel:"noopener noreferrer"}},[e._v("applyOps"),r("OutboundLink")],1),e._v("操作权限。")]),e._v(" "),r("h2",{attrs:{id:"superuser角色"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#superuser角色"}},[e._v("#")]),e._v(" Superuser角色")]),e._v(" "),r("p",[e._v("有几种角色间接或直接地提供系统级superuser的访问权限。")]),e._v(" "),r("p",[e._v("以下角色提供了为任何用户分配对任何数据库的任何权限的能力，这意味着拥有这些角色之一的用户可以为自己分配对任何数据库的任何权限:")]),e._v(" "),r("ul",[r("li",[e._v("dbOwner角色，当作用域为admin数据库时")]),e._v(" "),r("li",[e._v("userAdmin角色，当作用域为admin数据库时")]),e._v(" "),r("li",[e._v("userAdminAnyDatabase角色")])]),e._v(" "),r("h3",{attrs:{id:"root"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#root"}},[e._v("#")]),e._v(" root")]),e._v(" "),r("p",[e._v("root角色提供了所有的权限。相当于下面所有角色权限的组合:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/built-in-roles/#mongodb-authrole-readWriteAnyDatabase",target:"_blank",rel:"noopener noreferrer"}},[e._v("readWriteAnyDatabase"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/built-in-roles/#mongodb-authrole-dbAdminAnyDatabase",target:"_blank",rel:"noopener noreferrer"}},[e._v("dbAdminAnyDatabase"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/built-in-roles/#mongodb-authrole-userAdminAnyDatabase",target:"_blank",rel:"noopener noreferrer"}},[e._v("userAdminAnyDatabase"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/built-in-roles/#mongodb-authrole-clusterAdmin",target:"_blank",rel:"noopener noreferrer"}},[e._v("clusterAdmin"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/built-in-roles/#mongodb-authrole-restore",target:"_blank",rel:"noopener noreferrer"}},[e._v("restore"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/built-in-roles/#mongodb-authrole-backup",target:"_blank",rel:"noopener noreferrer"}},[e._v("backup"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("同时还提供了对system.表的"),r("a",{attrs:{href:"https://www.mongodb.com/docs/manual/reference/privilege-actions/#mongodb-authaction-validate",target:"_blank",rel:"noopener noreferrer"}},[e._v("validate"),r("OutboundLink")],1),e._v("权限操作。")]),e._v(" "),r("p",[e._v("3.4版本的修改: root角色包含了backup和restore角色的权限。")]),e._v(" "),r("h2",{attrs:{id:"内部角色"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内部角色"}},[e._v("#")]),e._v(" 内部角色")]),e._v(" "),r("h3",{attrs:{id:"system"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#system"}},[e._v("#")]),e._v(" __system")]),e._v(" "),r("p",[e._v("MongoDB将此角色分配给代表集群成员的用户对象，例如副本集成员和mongos实例。角色赋予它的持有者对数据库中的任何对象采取任何操作的权利。")]),e._v(" "),r("p",[e._v("除非在特殊情况下，不要将此角色分配给代表应用程序或管理人员的用户。")]),e._v(" "),r("Vssue",{attrs:{title:e.$title,options:{locale:"zh"}}})],1)}),[],!1,null,null,null);r.default=t.exports}}]);